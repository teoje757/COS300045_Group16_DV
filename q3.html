<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q3: Enforcement Trends Over Time</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/q3-style.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="visualization-container">
            <a href="q2.html" class="back-btn" title="Back to Q2">
                <span class="back-arrow">←</span>
                <span class="loading-spinner"></span>
            </a>
            
            <a href="q4.html" class="next-btn" title="Next to Q4">
                <span class="next-arrow">→</span>
                <span class="loading-spinner"></span>
            </a>
            
            <!-- Consistent Header (matches Q1/Q2, with Q3-specific text) -->
            <div class="header" style="text-align:center; margin-bottom: 30px;">
                <h1 id="dynamic-title" class="main-title" style="margin-bottom: 8px;">
                    Which Parts of Australia Have the Highest Mobile Phone Enforcement Rates?
                </h1>
                <div id="dynamic-subtitle" class="subtitle" style="font-size: 1.05rem; color: #6b7280;">
                    This page lets you compare how strictly each state and territory enforces mobile phone use while driving. Explore the chart below to see which jurisdictions issue the most fines per 10,000 licensed drivers, and use the filters to focus on specific years or regions.
                </div>
            </div>
            <!-- End Consistent Header -->


            <!-- Impact Banner (animated, above chart) -->
            <div id="impact-banner" style="margin-bottom: 24px;"></div>

            <!-- Filter Controls -->
            <div class="controls">
                <div class="controls-header">
                    <h3>Filters <span id="toggle-filters" class="toggle-arrow">›</span></h3>
                </div>
                <div id="filters-content" class="filters-content" style="display: none;">
                    <div class="filter-section">
                        <div class="filter-header">
                            <label>Year Range</label>
                        </div>
                        <div class="year-slider-container">
                            <!-- Timeline slider (D3 will render here) -->
                            <div id="timeline-slider" style="width:100%; margin-bottom: 10px;"></div>
                            <div class="year-inputs">
                                <div class="year-input-group">
                                    <label for="year-start" class="small-label">From</label>
                                    <select id="year-start">
                                        <option value="2010" selected>2010</option>
                                        <option value="2011">2011</option>
                                        <option value="2012">2012</option>
                                        <option value="2013">2013</option>
                                        <option value="2014">2014</option>
                                        <option value="2015">2015</option>
                                        <option value="2016">2016</option>
                                        <option value="2017">2017</option>
                                        <option value="2018">2018</option>
                                        <option value="2019">2019</option>
                                        <option value="2020">2020</option>
                                        <option value="2021">2021</option>
                                        <option value="2022">2022</option>
                                        <option value="2023">2023</option>
                                        <option value="2024">2024</option>
                                    </select>
                                </div>
                                <span class="range-separator">—</span>
                                <div class="year-input-group">
                                    <label for="year-end" class="small-label">To</label>
                                    <select id="year-end">
                                        <option value="2010">2010</option>
                                        <option value="2011">2011</option>
                                        <option value="2012">2012</option>
                                        <option value="2013">2013</option>
                                        <option value="2014">2014</option>
                                        <option value="2015">2015</option>
                                        <option value="2016">2016</option>
                                        <option value="2017">2017</option>
                                        <option value="2018">2018</option>
                                        <option value="2019">2019</option>
                                        <option value="2020">2020</option>
                                        <option value="2021">2021</option>
                                        <option value="2022">2022</option>
                                        <option value="2023">2023</option>
                                        <option value="2024" selected>2024</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filter-section">
                        <div class="filter-header">
                            <label>Jurisdictions</label>
                            <div class="quick-actions-inline">
                                <button id="select-all" class="link-btn">All</button>
                                <span class="separator">|</span>
                                <button id="deselect-all" class="link-btn">None</button>
                            </div>
                        </div>
                        <div class="jurisdiction-grid">
                            <label class="jurisdiction-checkbox">
                                <input type="checkbox" data-jurisdiction="NSW" checked>
                                <span class="checkbox-custom nsw"></span>
                                <span class="jurisdiction-label">NSW</span>
                            </label>
                            <label class="jurisdiction-checkbox">
                                <input type="checkbox" data-jurisdiction="VIC" checked>
                                <span class="checkbox-custom vic"></span>
                                <span class="jurisdiction-label">VIC</span>
                            </label>
                            <label class="jurisdiction-checkbox">
                                <input type="checkbox" data-jurisdiction="QLD" checked>
                                <span class="checkbox-custom qld"></span>
                                <span class="jurisdiction-label">QLD</span>
                            </label>
                            <label class="jurisdiction-checkbox">
                                <input type="checkbox" data-jurisdiction="WA" checked>
                                <span class="checkbox-custom wa"></span>
                                <span class="jurisdiction-label">WA</span>
                            </label>
                            <label class="jurisdiction-checkbox">
                                <input type="checkbox" data-jurisdiction="SA" checked>
                                <span class="checkbox-custom sa"></span>
                                <span class="jurisdiction-label">SA</span>
                            </label>
                            <label class="jurisdiction-checkbox">
                                <input type="checkbox" data-jurisdiction="TAS" checked>
                                <span class="checkbox-custom tas"></span>
                                <span class="jurisdiction-label">TAS</span>
                            </label>
                            <label class="jurisdiction-checkbox">
                                <input type="checkbox" data-jurisdiction="ACT" checked>
                                <span class="checkbox-custom act"></span>
                                <span class="jurisdiction-label">ACT</span>
                            </label>
                            <label class="jurisdiction-checkbox">
                                <input type="checkbox" data-jurisdiction="NT" checked>
                                <span class="checkbox-custom nt"></span>
                                <span class="jurisdiction-label">NT</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mini-Map (D3 SVG map will render here) -->
            <div id="mini-map" style="width:100%; max-width:400px; margin: 0 auto 24px auto;"></div>

            <!-- Chart Container -->
            <div id="chart"></div>

            <!-- Legend -->
            <div id="legend"></div>

            <!-- Story Panel (D3 will render here) -->
            <div id="story-panel" style="margin: 32px 0 0 0;"></div>
        </div>
    </div>

    <script>
        // Add loading state to back and next buttons
        document.querySelector('.back-btn').addEventListener('click', function(e) {
            this.classList.add('loading');
        });
        document.querySelector('.next-btn').addEventListener('click', function(e) {
            this.classList.add('loading');
        });
    </script>
    <script src="js/q3.js"></script>
</body>
</html>
